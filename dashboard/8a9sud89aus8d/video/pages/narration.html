<!-- narration.html - Player de audio e tabela de segmentos da narracao -->

<!-- Detail Header -->
<div class="yt-detail-header">
    <div class="yt-detail-header-left">
        <nav class="yt-detail-breadcrumb">
            <a id="narr-bc-pipeline">Pipeline</a>
            <span class="yt-detail-breadcrumb-sep">/</span>
            <a id="narr-bc-topic">Historia</a>
            <span class="yt-detail-breadcrumb-sep">/</span>
            <span class="yt-detail-breadcrumb-current">Narracao</span>
        </nav>
        <h1 class="yt-detail-title">Narracao</h1>
    </div>
    <div class="yt-detail-actions">
        <button class="yt-btn yt-btn-sm yt-btn-ghost" id="narr-back">&#8592; Voltar</button>
        <a class="yt-btn yt-btn-ghost" id="narr-download" style="display:none;" download>Download Audio</a>
        <button class="yt-btn yt-btn-primary" id="narr-regen" disabled>Regenerar Narracao</button>
    </div>
</div>

<div id="narr-loading" class="yt-empty-state">
    <div class="yt-spinner"></div>
</div>

<div id="narr-empty" class="yt-empty-state" style="display:none;">
    <div class="yt-empty-state-icon">&#127908;</div>
    <div class="yt-empty-state-message">Nenhuma narracao gerada ainda.</div>
</div>

<div id="narr-content" style="display:none;">
    <!-- Stats -->
    <div class="yt-detail-stats" style="margin-bottom:16px;">
        <div class="yt-detail-stat">
            <div class="yt-detail-stat-label">Duracao Total</div>
            <div class="yt-detail-stat-value" id="narr-duration">--</div>
        </div>
        <div class="yt-detail-stat">
            <div class="yt-detail-stat-label">Segmentos</div>
            <div class="yt-detail-stat-value" id="narr-seg-count">--</div>
        </div>
        <div class="yt-detail-stat">
            <div class="yt-detail-stat-label">Voz</div>
            <div class="yt-detail-stat-value" id="narr-voice-info">--</div>
        </div>
    </div>

    <!-- Audio Player -->
    <div class="yt-card" style="margin-bottom:16px;">
        <div class="yt-card-header" style="display:flex;justify-content:space-between;align-items:center;">
            <span style="font-weight:600;">Player de Audio</span>
            <span class="yt-badge yt-badge-info" id="narr-status"></span>
        </div>
        <div class="yt-card-body">
            <audio id="narr-audio" controls style="width:100%;"></audio>
        </div>
    </div>

    <!-- Segments Table -->
    <div class="yt-card">
        <div class="yt-card-header"><span style="font-weight:600;">Segmentos da Narracao</span></div>
        <div class="yt-card-body" style="padding:0;">
            <table class="yt-table">
                <thead>
                    <tr>
                        <th style="width:60px;">#</th>
                        <th>Texto da Narracao</th>
                        <th style="width:100px;">Duracao</th>
                    </tr>
                </thead>
                <tbody id="narr-segments-body"></tbody>
            </table>
        </div>
    </div>
</div>

<script>
    window.ytRegisterPage('narration', async (params) => {
        const { loadNarration } = await import('./js/pages/narration.js');
        loadNarration(params);
    });
</script>
