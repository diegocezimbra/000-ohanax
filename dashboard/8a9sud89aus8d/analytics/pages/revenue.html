<div class="header">
  <h2>Receita por Projeto</h2>
  <div class="header-actions">
    <div class="date-filter">
      <select id="revenue-period" onchange="onPeriodChange('revenue')">
        <option value="7">Ultimos 7 dias</option>
        <option value="30" selected>Ultimos 30 dias</option>
        <option value="90">Ultimos 90 dias</option>
        <option value="365">Ultimo ano</option>
        <option value="all">Todos</option>
      </select>
    </div>
    <button class="refresh-btn" onclick="loadRevenuePage()">Atualizar</button>
  </div>
</div>

<div class="cards">
  <div class="card highlight">
    <div class="card-title">Receita Total <span class="info-tooltip" data-tooltip="Soma de toda receita de todos os projetos: MRR (assinaturas) + One-Time (pacotes avulsos). E o dinheiro total que entrou."></span></div>
    <div class="card-value" id="revenue-total">R$ --</div>
    <div class="card-subtitle">MRR + One-Time</div>
  </div>
  <div class="card">
    <div class="card-title">MRR Total <span class="info-tooltip" data-tooltip="Monthly Recurring Revenue - Receita mensal recorrente de todos os projetos. Soma de todas as assinaturas ativas."></span></div>
    <div class="card-value" id="revenue-mrr">R$ --</div>
    <div class="card-subtitle">Receita recorrente</div>
  </div>
  <div class="card">
    <div class="card-title">ARR Total <span class="info-tooltip" data-tooltip="Annual Recurring Revenue - MRR x 12. Projecao de quanto voce faturaria em um ano com o MRR atual."></span></div>
    <div class="card-value" id="revenue-arr">R$ --</div>
    <div class="card-subtitle">Receita anual</div>
  </div>
  <div class="card">
    <div class="card-title">One-Time Total <span class="info-tooltip tooltip-left" data-tooltip="Receita de pacotes avulsos de todos os projetos. Vendas unicas sem recorrencia."></span></div>
    <div class="card-value" id="revenue-onetime">R$ --</div>
    <div class="card-subtitle">Pacotes vendidos</div>
  </div>
</div>

<div class="section">
  <div class="section-title">Receita por Projeto <span class="info-tooltip" data-tooltip="Compara a receita de cada projeto (Auth, Billing, Security, oEntregador). Mostra MRR e One-Time separadamente."></span></div>
  <div class="project-cards" id="revenue-projects">
    <div class="loading">Carregando...</div>
  </div>
</div>

<div class="grid-2">
  <div class="section">
    <div class="section-title">MRR por Plano <span class="info-tooltip" data-tooltip="Distribuicao do MRR por tipo de plano. Mostra quanto cada plano contribui para a receita recorrente."></span></div>
    <div id="revenue-by-plan"><div class="loading">Carregando...</div></div>
  </div>
  <div class="section">
    <div class="section-title">Evolucao MRR <span class="info-tooltip" data-tooltip="Grafico mostrando como o MRR evoluiu ao longo do tempo. Subida = crescimento saudavel, queda = churn ou downgrades."></span></div>
    <div id="revenueChart" style="height: 250px;"></div>
  </div>
</div>

<div class="section">
  <div class="section-title">Ultimas Transacoes <span class="info-tooltip" data-tooltip="Lista das transacoes mais recentes de todos os projetos. Mostra tipo (assinatura ou pacote), valor e data."></span></div>
  <table>
    <thead>
      <tr>
        <th>Email</th>
        <th>Projeto</th>
        <th>Tipo</th>
        <th>Plano/Pacote</th>
        <th>Valor</th>
        <th>Data</th>
      </tr>
    </thead>
    <tbody id="revenue-transactions">
      <tr><td colspan="6" class="loading">Carregando...</td></tr>
    </tbody>
  </table>
</div>
