<div class="header">
  <h2>Clientes Pagantes</h2>
  <div class="header-actions">
    <div class="date-filter">
      <select id="paying-period" onchange="onPeriodChange('paying')">
        <option value="7">Ultimos 7 dias</option>
        <option value="30" selected>Ultimos 30 dias</option>
        <option value="90">Ultimos 90 dias</option>
        <option value="365">Ultimo ano</option>
        <option value="all">Todos</option>
      </select>
    </div>
    <button class="refresh-btn" onclick="loadPayingPage()">Atualizar</button>
  </div>
</div>

<div class="section">
  <div class="section-title">Filtros <span class="info-tooltip" data-tooltip="Use os filtros para encontrar clientes especificos. Pode filtrar por projeto, tipo de pagamento, plano e buscar por email."></span></div>
  <div class="filters-row">
    <div class="filter-group">
      <label>Projeto</label>
      <select id="paying-filter-project" onchange="loadPayingPage()">
        <option value="">Todos</option>
        <option value="app-auth">Auth</option>
        <option value="app-billing">Billing</option>
        <option value="security-audit">Security</option>
        <option value="app-oentregador">oEntregador</option>
      </select>
    </div>
    <div class="filter-group">
      <label>Tipo</label>
      <select id="paying-filter-type" onchange="loadPayingPage()">
        <option value="">Todos</option>
        <option value="subscription">Assinatura</option>
        <option value="onetime">One-Time</option>
      </select>
    </div>
    <div class="filter-group">
      <label>Plano</label>
      <select id="paying-filter-plan" onchange="loadPayingPage()">
        <option value="">Todos</option>
      </select>
    </div>
    <div class="filter-group">
      <label>Buscar</label>
      <input type="text" id="paying-filter-search" placeholder="Email..." onkeyup="debouncePayingSearch()">
    </div>
  </div>
</div>

<div class="cards">
  <div class="card highlight">
    <div class="card-title">MRR Total <span class="info-tooltip" data-tooltip="Monthly Recurring Revenue - Soma do MRR de todos os clientes filtrados. Receita mensal previsivel."></span></div>
    <div class="card-value" id="paying-mrr">R$ --</div>
    <div class="card-subtitle">Receita mensal recorrente</div>
  </div>
  <div class="card">
    <div class="card-title">Assinantes Ativos <span class="info-tooltip" data-tooltip="Quantidade de clientes com assinatura ativa (status 'active'). Pagam mensalmente."></span></div>
    <div class="card-value" id="paying-subs">--</div>
    <div class="card-subtitle">Assinaturas ativas</div>
  </div>
  <div class="card">
    <div class="card-title">One-Time <span class="info-tooltip" data-tooltip="Quantidade de clientes unicos que compraram pacotes avulsos. Cada email conta uma vez."></span></div>
    <div class="card-value" id="paying-onetime">--</div>
    <div class="card-subtitle">Compradores unicos</div>
  </div>
  <div class="card">
    <div class="card-title">Receita One-Time <span class="info-tooltip tooltip-left" data-tooltip="Soma de toda receita de pacotes avulsos dos clientes filtrados. Vendas unicas."></span></div>
    <div class="card-value" id="paying-onetime-revenue">R$ --</div>
    <div class="card-subtitle">Total em pacotes</div>
  </div>
</div>

<div class="section">
  <div class="section-title">Clientes Pagantes (<span id="paying-count">0</span>) <span class="info-tooltip" data-tooltip="Lista de todos os clientes que pagaram. O numero mostra o total de clientes com os filtros atuais."></span></div>
  <div class="table-container">
    <table>
      <thead>
        <tr>
          <th>Email</th>
          <th>Projeto</th>
          <th>Plano</th>
          <th>Tipo</th>
          <th>Valor</th>
          <th>Status</th>
          <th>Data</th>
        </tr>
      </thead>
      <tbody id="paying-table">
        <tr><td colspan="7" class="loading">Carregando...</td></tr>
      </tbody>
    </table>
  </div>
</div>
